name: Preceding Tag Action
author: AJ Granowski
description: Find the most recent tag that is reachable from a commit.
runs:
  using: node24
  main: dist/index.js

inputs:
  include-ref:
    description: If true, include tags pointing to `ref` as candidates.
    default: "false"
    required: false
  ref:
    description: The branch, tag, or SHA to find the preceding tag from.
    default: ${{ github.sha }}
    required: true
  regex:
    description: A regular expression used to filter candidate tag names.
    default: ^.+$
    required: false
  repository:
    description: Repository name with owner. For example, AJGranowski/preceding-tag-action
    default: ${{ github.repository }}
    required: false
  token:
    description: Personal access token (PAT) used to fetch the tags.
    default: ${{ github.token }}
    required: false

outputs:
  tag:
    description: The preceding tag, or an empty string if no preceding tag matching the filter was found.